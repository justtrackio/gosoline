"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9929],{1979(e,n,r){r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>h,default:()=>m,frontMatter:()=>d,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"quickstart/http-server/create-a-money-exchange-app","title":"Create a money exchange app","description":"One of the primary purposes of Gosoline is to help you build an HTTP server. An HTTP server, in the context of Gosoline, is a module that:","source":"@site/docs/quickstart/http-server/create-a-money-exchange-app.mdx","sourceDirName":"quickstart/http-server","slug":"/quickstart/http-server/create-a-money-exchange-app","permalink":"/gosoline/quickstart/http-server/create-a-money-exchange-app","draft":false,"unlisted":false,"editUrl":"https://github.com/justtrackio/gosoline/tree/main/docs/docs/quickstart/http-server/create-a-money-exchange-app.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Create a money exchange app"},"sidebar":"docSidebar","previous":{"title":"Create an HTTP server","permalink":"/gosoline/quickstart/http-server/create-an-http-server"},"next":{"title":"Write a CRUD SQL app","permalink":"/gosoline/quickstart/http-server/write-crud-sql-app"}}');var i=r(4848),o=r(8453),s=r(2754);const a='// snippet-start: imports\npackage main\n\nimport (\n\t"context"\n\t"fmt"\n\t"net/http"\n\t"strconv"\n\t"time"\n\n\t"github.com/justtrackio/gosoline/pkg/cfg"\n\t"github.com/justtrackio/gosoline/pkg/currency"\n\t"github.com/justtrackio/gosoline/pkg/httpserver"\n\t"github.com/justtrackio/gosoline/pkg/log"\n)\n\n// snippet-end: imports\n\n// snippet-start: euro handler\ntype euroHandler struct {\n\tlogger          log.Logger\n\tcurrencyService currency.Service\n}\n\n// snippet-end: euro handler\n\n// snippet-start: new euro handler\nfunc NewEuroHandler(ctx context.Context, config cfg.Config, logger log.Logger) (*euroHandler, error) {\n\t// Instantiate a new currencyService\n\tcurrencyService, err := currency.New(ctx, config, logger)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf("can not create currencyService: %w", err)\n\t}\n\n\t// Return a euroHandler\n\treturn &euroHandler{\n\t\tlogger:          logger,\n\t\tcurrencyService: currencyService,\n\t}, nil\n}\n\n// snippet-end: new euro handler\n\n// snippet-start: handle\nfunc (h *euroHandler) Handle(requestContext context.Context, request *httpserver.Request) (response *httpserver.Response, err error) {\n\t// Get a currency and amountString from the request parameters.\n\tcurrency := request.Params.ByName("currency")\n\tamountString := request.Params.ByName("amount")\n\n\t// Parse a float value from amountString.\n\tamount, err := strconv.ParseFloat(amountString, 64)\n\t// Send a 400 Bad Request response if amountString can\'t be parsed into a valid float.\n\tif err != nil {\n\t\th.logger.Error(requestContext, "cannot parse amount %s: %w", amountString, err)\n\n\t\treturn httpserver.NewStatusResponse(http.StatusBadRequest), nil\n\t}\n\n\t// Convert the amount from the source currency to euros.\n\tresult, err := h.currencyService.ToEur(requestContext, amount, currency)\n\t// Send a 500 Internal Server Error if the server can\'t convert the amount.\n\tif err != nil {\n\t\th.logger.Error(requestContext, "cannot convert amount %f with currency %s: %w", amount, currency, err)\n\n\t\treturn httpserver.NewStatusResponse(http.StatusInternalServerError), nil\n\t}\n\n\t// Send a 200 OK Json response back to the client with the results.\n\treturn httpserver.NewJsonResponse(result), nil\n}\n\n// snippet-end: handle\n\n// snippet-start: euro at date handler\ntype euroAtDateHandler struct {\n\tlogger          log.Logger\n\tcurrencyService currency.Service\n}\n\nfunc NewEuroAtDateHandler(ctx context.Context, config cfg.Config, logger log.Logger) (*euroAtDateHandler, error) {\n\tcurrencyService, err := currency.New(ctx, config, logger)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf("can not create currencyService: %w", err)\n\t}\n\n\treturn &euroAtDateHandler{\n\t\tlogger:          logger,\n\t\tcurrencyService: currencyService,\n\t}, nil\n}\n\n// snippet-end: euro at date handler\n\n// snippet-start: euro-at-date handler handle\nfunc (h *euroAtDateHandler) Handle(requestContext context.Context, request *httpserver.Request) (response *httpserver.Response, err error) {\n\t// Get the request parameters and parse their string values.\n\tcurrency := request.Params.ByName("currency")\n\tdateString := request.Params.ByName("date")\n\tdate, err := time.Parse(time.RFC3339, dateString)\n\t// Send a 500 Internal Server Error if the service can\'t parse the params or convert the currency.\n\tif err != nil {\n\t\th.logger.Error(requestContext, "cannot parse date %s: %w", dateString, err)\n\n\t\treturn httpserver.NewStatusResponse(http.StatusInternalServerError), nil\n\t}\n\n\tamountString := request.Params.ByName("amount")\n\tamount, err := strconv.ParseFloat(amountString, 64)\n\tif err != nil {\n\t\th.logger.Error(requestContext, "cannot parse amount %s: %w", amountString, err)\n\n\t\treturn httpserver.NewStatusResponse(http.StatusInternalServerError), nil\n\t}\n\n\tresult, err := h.currencyService.ToEurAtDate(requestContext, amount, currency, date)\n\tif err != nil {\n\t\th.logger.Error(requestContext, "cannot convert amount %f with currency %s at date %v: %w", amount, currency, date, err)\n\n\t\treturn httpserver.NewStatusResponse(http.StatusInternalServerError), nil\n\t}\n\n\t// Send a 200 OK Json response back to the client with the results.\n\treturn httpserver.NewJsonResponse(result), nil\n}\n\n// snippet-end: euro-at-date handler handle\n',l='// snippet-start: imports\npackage main\n\nimport (\n\t"context"\n\t"fmt"\n\n\t"github.com/justtrackio/gosoline/pkg/cfg"\n\t"github.com/justtrackio/gosoline/pkg/httpserver"\n\t"github.com/justtrackio/gosoline/pkg/log"\n)\n\n// snippet-end: imports\n\n// snippet-start: api definer\nfunc ApiDefiner(ctx context.Context, config cfg.Config, logger log.Logger) (*httpserver.Definitions, error) {\n\t// Create an empty Definitions object, called definitions.\n\tdefinitions := &httpserver.Definitions{}\n\n\t// Create a new euroHandler.\n\teuroHandler, err := NewEuroHandler(ctx, config, logger)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf("can not create euroHandler: %w", err)\n\t}\n\n\t// Create a new euroAtDateHandler.\n\teuroAtDateHandler, err := NewEuroAtDateHandler(ctx, config, logger)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf("can not create euroAtDateHandler: %w", err)\n\t}\n\n\t// Add two routes to definitions. Each route handles GET requests. Notice that each route uses one of the handlers you wrote in handlers.go.\n\tdefinitions.GET("/euro/:amount/:currency", httpserver.CreateHandler(euroHandler))\n\tdefinitions.GET("/euro-at-date/:amount/:currency/:date", httpserver.CreateHandler(euroAtDateHandler))\n\n\t// Return definitions.\n\treturn definitions, nil\n}\n\n// snippet-end: api definer\n',c='// snippet-start: imports\npackage main\n\nimport (\n\t"github.com/justtrackio/gosoline/pkg/application"\n\t"github.com/justtrackio/gosoline/pkg/currency"\n\t"github.com/justtrackio/gosoline/pkg/httpserver"\n)\n\n// snippet-end: imports\n\n// snippet-start: main\nfunc main() {\n\tapplication.Run(\n\t\tapplication.WithConfigFile("config.dist.yml", "yml"),\n\t\tapplication.WithLoggerHandlersFromConfig,\n\n\t\tapplication.WithModuleFactory("api", httpserver.New("default", ApiDefiner)),\n\t\tapplication.WithModuleFactory("currency", currency.NewCurrencyModule()),\n\t)\n}\n\n// snippet-end: main\n',d={sidebar_position:4,title:"Create a money exchange app"},h=void 0,u={},p=[{value:"Before you begin",id:"before-you-begin",level:2},{value:"Set up your file structure",id:"set-up-your-file-structure",level:2},{value:"Implement handler.go",id:"implement-handlergo",level:2},{value:"Import your dependencies",id:"import-your-dependencies",level:3},{value:"Define a euroHandler structure",id:"define-a-eurohandler-structure",level:3},{value:"Define a handler",id:"define-a-handler",level:3},{value:"Implement a request handler",id:"implement-a-request-handler",level:3},{value:"Define a euroAtDateHandler",id:"define-a-euroatdatehandler",level:3},{value:"Implement a second request handler",id:"implement-a-second-request-handler",level:3},{value:"Implement definer.go",id:"implement-definergo",level:2},{value:"Import dependencies",id:"import-dependencies",level:3},{value:"Implement a definer",id:"implement-a-definer",level:3},{value:"Configure your server",id:"configure-your-server",level:2},{value:"Implement main.go",id:"implement-maingo",level:2},{value:"Import your dependencies",id:"import-your-dependencies-1",level:3},{value:"Implement main()",id:"implement-main",level:3},{value:"Run your application",id:"run-your-application",level:2},{value:"Conclusion",id:"conclusion",level:2}];function g(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"One of the primary purposes of Gosoline is to help you build an HTTP server. An HTTP server, in the context of Gosoline, is a module that:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Runs indefinitely"}),"\n",(0,i.jsx)(n.li,{children:"Listens to a port for requests"}),"\n",(0,i.jsx)(n.li,{children:"Provides responses to those requests"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Our ",(0,i.jsx)(n.a,{href:"/reference/package-httpserver",children:(0,i.jsx)(n.code,{children:"httpserver"})})," package provides a convenient way to create HTTP servers."]}),"\n",(0,i.jsx)(n.p,{children:"In this tutorial, you'll create a money exchange web service. This service will have two endpoints:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /euro/{AMOUNT IN SOURCE CURRENCY}/{SOURCE CURRENCY}\nGET /euro-at-date/{AMOUNT IN SOURCE CURRENCY}/{SOURCE CURRENCY}/{EXCHANGE RATE DATE}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Both of these endpoints:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Accept an amount in a source currency."}),"\n",(0,i.jsx)(n.li,{children:"Convert that amount to euros based on an exchange rate."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"euro-at-date"})," endpoint allows you to specify a historical date for the exchange rate."]}),"\n",(0,i.jsx)(n.h2,{id:"before-you-begin",children:"Before you begin"}),"\n",(0,i.jsxs)(n.p,{children:["Before you begin, make sure you have ",(0,i.jsx)(n.a,{href:"https://go.dev/doc/install",children:"Golang"})," installed on your machine."]}),"\n",(0,i.jsx)(n.h2,{id:"set-up-your-file-structure",children:"Set up your file structure"}),"\n",(0,i.jsx)(n.p,{children:"First, you need to set up the following file structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"money-exchange/\n\u251c\u2500\u2500 handler.go\n\u251c\u2500\u2500 definer.go\n\u251c\u2500\u2500 config.dist.yml\n\u2514\u2500\u2500 main.go\n"})}),"\n",(0,i.jsx)(n.p,{children:"For example, in Unix, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"mkdir money-exchange; cd money-exchange\ntouch handler.go\ntouch definer.go\ntouch config.dist.yml\ntouch main.go\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Those are all the files you need to build your web service with gosoline! Next, you'll implement each of these files, starting with ",(0,i.jsx)(n.code,{children:"handler.go"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"implement-handlergo",children:"Implement handler.go"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"handler.go"}),", add the following code:"]}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"handler.go"}),(0,i.jsx)(s.N,{showLineNumbers:!0,language:"go",children:a})]}),"\n",(0,i.jsx)(n.p,{children:"Now, you'll walkthrough this file in detail to learn how it works."}),"\n",(0,i.jsx)(n.h3,{id:"import-your-dependencies",children:"Import your dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["At the top of ",(0,i.jsx)(n.code,{children:"handler.go"}),", you declared the package and imported some dependencies:"]}),"\n",(0,i.jsx)(s.N,{language:"go",title:"handler.go",snippet:"imports",children:a}),"\n",(0,i.jsxs)(n.p,{children:["Here, you declared the package as ",(0,i.jsx)(n.code,{children:"main"}),". Then, you imported several standard modules along with four gosoline dependencies:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-cfg",children:(0,i.jsx)(n.code,{children:"cfg"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"currency"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-httpserver",children:(0,i.jsx)(n.code,{children:"httpserver"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-log",children:(0,i.jsx)(n.code,{children:"log"})})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"define-a-eurohandler-structure",children:"Define a euroHandler structure"}),"\n",(0,i.jsxs)(n.p,{children:["Next, you created a ",(0,i.jsx)(n.code,{children:"euroHandler"})," struct:"]}),"\n",(0,i.jsx)(s.N,{language:"go",title:"handler.go",snippet:"euro handler",children:a}),"\n",(0,i.jsxs)(n.p,{children:["You'll use this in a few places to carry data about your logger and currency service. You'll also implement its ",(0,i.jsx)(n.code,{children:"Handle()"})," method to handle HTTP requests."]}),"\n",(0,i.jsx)(n.h3,{id:"define-a-handler",children:"Define a handler"}),"\n",(0,i.jsxs)(n.p,{children:["Then, you implemented a function for creating new ",(0,i.jsx)(n.code,{children:"euroHandler"})," structs:"]}),"\n",(0,i.jsx)(s.N,{language:"go",title:"handler.go",snippet:"new euro handler",children:a}),"\n",(0,i.jsxs)(n.p,{children:["You'll use this later to create a new ",(0,i.jsx)(n.code,{children:"euroHandler"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"implement-a-request-handler",children:"Implement a request handler"}),"\n",(0,i.jsxs)(n.p,{children:["Then, you implemented ",(0,i.jsx)(n.code,{children:"euroHandler.Handle()"})," for handling HTTP requests:"]}),"\n",(0,i.jsx)(s.N,{language:"go",title:"handler.go",snippet:"handle",children:a}),"\n",(0,i.jsx)(n.h3,{id:"define-a-euroatdatehandler",children:"Define a euroAtDateHandler"}),"\n",(0,i.jsxs)(n.p,{children:["Like you did with ",(0,i.jsx)(n.code,{children:"euroHandler"}),", you defined a ",(0,i.jsx)(n.code,{children:"euroAtDateHandler"})," struct and a corresponding constructor:"]}),"\n",(0,i.jsx)(s.N,{language:"go",title:"handler.go",snippet:"euro at date handler",children:a}),"\n",(0,i.jsxs)(n.p,{children:["The logic here is very similar to the logic for ",(0,i.jsx)(n.code,{children:"euroHandler"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"implement-a-second-request-handler",children:"Implement a second request handler"}),"\n",(0,i.jsxs)(n.p,{children:["Finally, you implemented ",(0,i.jsx)(n.code,{children:"euroAtDateHandler.Handle()"})," for handling HTTP requests:"]}),"\n",(0,i.jsx)(s.N,{language:"go",title:"handler.go",snippet:"euro-at-date handler handle",children:a}),"\n",(0,i.jsxs)(n.p,{children:["The logic here is very similar to the logic for ",(0,i.jsx)(n.code,{children:"euroHandler.Handle()"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Now, you've fully implemented your request handlers. Next, you'll create a ",(0,i.jsx)(n.code,{children:"Definer"})," object."]}),"\n",(0,i.jsx)(n.h2,{id:"implement-definergo",children:"Implement definer.go"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"definer.go"}),", add the following code:"]}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"definer.go"}),(0,i.jsx)(s.N,{showLineNumbers:!0,language:"go",children:l})]}),"\n",(0,i.jsx)(n.p,{children:"Now, you'll walkthrough this file in detail to learn how it works."}),"\n",(0,i.jsx)(n.h3,{id:"import-dependencies",children:"Import dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["At the top of ",(0,i.jsx)(n.code,{children:"definer.go"}),", you declared the package and imported some dependencies:"]}),"\n",(0,i.jsx)(s.N,{title:"definer.go",language:"go",snippet:"imports",children:l}),"\n",(0,i.jsxs)(n.p,{children:["Here, you declared the package as ",(0,i.jsx)(n.code,{children:"main"}),". Then, you imported the standard ",(0,i.jsx)(n.code,{children:"context"})," and ",(0,i.jsx)(n.code,{children:"fmt"})," modules along with three gosoline dependencies:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-cfg",children:(0,i.jsx)(n.code,{children:"cfg"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-httpserver",children:(0,i.jsx)(n.code,{children:"httpserver"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-log",children:(0,i.jsx)(n.code,{children:"log"})})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"implement-a-definer",children:"Implement a definer"}),"\n",(0,i.jsxs)(n.p,{children:["Then, you implemented ",(0,i.jsx)(n.code,{children:"ApiDefiner"}),":"]}),"\n",(0,i.jsx)(s.N,{title:"definer.go",language:"go",snippet:"api definer",children:l}),"\n",(0,i.jsxs)(n.p,{children:["Here, the ",(0,i.jsx)(n.code,{children:":amount"}),", ",(0,i.jsx)(n.code,{children:":currency"}),", etc. constructs are path parameters. This means the handler will be able to access and use them. Indeed, you already implemented this behavior in your ",(0,i.jsx)(n.code,{children:"handler.go"})," file. ",(0,i.jsx)(n.code,{children:"euroHandler.Handle()"})," gets these values like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'currency := request.Params.ByName("currency")\namountString := request.Params.ByName("amount")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now that you've created handlers and a definer, create a configuration file."}),"\n",(0,i.jsx)(n.h2,{id:"configure-your-server",children:"Configure your server"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"config.dist.yml"}),", ",(0,i.jsx)(n.a,{href:"/how-to/configure-your-httpserver",children:"configure your server"}),":"]}),"\n",(0,i.jsx)(s.N,{showLineNumbers:!0,language:"yaml",title:"config.dist.yml",children:"env: dev\n\napp_project: gosoline\napp_family: example\napp_group: money\napp_name: exchange\n\nhttpserver:\n  default:\n    port: 8080\n\nkvstore:\n  currency:\n    type: chain\n    in_memory:\n      max_size: 500000\n    application: money-exchange\n    elements: [inMemory]\n    ttl: 30m\n"}),"\n",(0,i.jsx)(n.p,{children:"Here, you set some minimal configurations for your web server. There are a few interesting configurations to note:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"httpserver.default.port"})," exposes port 8080. (In your applications, you can configure ",(0,i.jsx)(n.a,{href:"/reference/package-httpserver#settings",children:"more aspects of the server"})," in a similar manner.)"]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"currency"})," key value store (",(0,i.jsx)(n.code,{children:"kvstore"}),") is defined as ",(0,i.jsx)(n.code,{children:"inMemory"})," and serves as a local database. The ",(0,i.jsx)(n.code,{children:"currency"})," module that you used in ",(0,i.jsx)(n.code,{children:"handler.go"})," uses this to store the exchange rates for various currencies:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"First, it makes an initial call to an external endpoint in order to get exchange rates and stores them in a kvstore"}),"\n",(0,i.jsx)(n.li,{children:"Later, it occasionally makes more calls to obtain exchange rates, in order to keep the kvstore updated"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["At this point, you've implemented your handlers, a definer, and your app configuration. Next, you'll implement ",(0,i.jsx)(n.code,{children:"main.go"})," that puts it all together."]}),"\n",(0,i.jsx)(n.h2,{id:"implement-maingo",children:"Implement main.go"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"main.go"}),", add the following code:"]}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"main.go"}),(0,i.jsx)(s.N,{showLineNumbers:!0,language:"go",children:c})]}),"\n",(0,i.jsx)(n.p,{children:"Now, you'll walkthrough this file in detail to learn how it works."}),"\n",(0,i.jsx)(n.h3,{id:"import-your-dependencies-1",children:"Import your dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["At the top of ",(0,i.jsx)(n.code,{children:"main.go"}),", you declared the package and imported some dependencies:"]}),"\n",(0,i.jsx)(s.N,{title:"main.go",language:"go",snippet:"imports",children:c}),"\n",(0,i.jsxs)(n.p,{children:["Here, you declared the package as ",(0,i.jsx)(n.code,{children:"main"}),". Then, you imported three gosoline dependencies:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"application"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"currency"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-httpserver",children:(0,i.jsx)(n.code,{children:"httpserver"})})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"implement-main",children:"Implement main()"}),"\n",(0,i.jsx)(n.p,{children:"Then, you implemented the main entry point for your web service:"}),"\n",(0,i.jsx)(s.N,{title:"main.go",language:"go",snippet:"main",children:c}),"\n",(0,i.jsxs)(n.p,{children:["Here, you run a kernel that uses ",(0,i.jsx)(n.em,{children:"config.dist.yml"})," for its configuration and uses the ",(0,i.jsx)(n.code,{children:"api"})," and ",(0,i.jsx)(n.code,{children:"currency"})," modules."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Notice the ",(0,i.jsx)(n.code,{children:"api"})," module is using your ",(0,i.jsx)(n.code,{children:"ApiDefiner"})," that, in turn, uses your handlers."]})}),"\n",(0,i.jsx)(n.p,{children:"Now that you've wired the application up, the final step is to test it to confirm that it works as expected."}),"\n",(0,i.jsx)(n.h2,{id:"run-your-application",children:"Run your application"}),"\n",(0,i.jsx)(n.p,{children:"Initialize your go module, install the dependencies, and run your web service:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"go mod init money_exchange/m\ngo mod tidy\ngo run .\n"})}),"\n",(0,i.jsx)(n.p,{children:"In a separate terminal, make requests to your service:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"curl localhost:8080/euro/10/GBP\ncurl localhost:8080/euro-at-date/10/USD/2021-01-03T00:00:00Z\n"})}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsxs)(n.p,{children:["Having seen a sample HTTP server, you can now look into more detailed functionality, such as ",(0,i.jsx)(n.a,{href:"/reference/package-test",children:"writing integration tests"}),".\nCheck out these resources to learn more about creating web services with gosoline:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/quickstart/http-server/create-an-http-server",children:"Create an HTTP server"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-httpserver",children:"API reference for the htpserver package"})}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}},2754(e,n,r){r.d(n,{N:()=>y,v:()=>f});r(6540);var t=r(3796),i=r(5430),o=r(4501),s=r(5292),a=r(5433),l=r(6311),c=r(7625),d=r(1662),h=r(6645),u=r(3457),p=r(467),g=r(3865),m=r(5293),x=r(6025),j=r(4848);function f(){const{colorMode:e}=(0,m.G)(),n="dark"===e,r=(0,p.A)({palette:{mode:n?"dark":"light"}});return(0,j.jsx)(g.A,{theme:r,children:(0,j.jsxs)(d.Ay,{container:!0,spacing:4,children:[(0,j.jsx)(d.Ay,{item:!0,xs:12,s:12,md:4,children:(0,j.jsxs)(t.A,{style:{height:"100%"},children:[(0,j.jsx)(o.A,{title:"HTTP Server",avatar:(0,j.jsx)(h.A,{}),titleTypographyProps:{variant:"h6"}}),(0,j.jsx)(s.A,{children:"Build REST web services with HTTP handling, caching, OAuth, and much more."}),(0,j.jsx)(i.A,{children:(0,j.jsx)(a.A,{size:"small",href:(0,x.Ay)("/category/http-server"),children:"Get started"})})]})}),(0,j.jsx)(d.Ay,{item:!0,xs:12,md:4,children:(0,j.jsxs)(t.A,{style:{height:"100%"},children:[(0,j.jsx)(o.A,{title:"Message Queues",avatar:(0,j.jsx)(l.A,{}),titleTypographyProps:{variant:"h6"}}),(0,j.jsx)(s.A,{children:"Process asynchronous messages from Kafka, Redis, or any other queuing or streaming system."}),(0,j.jsx)(i.A,{children:(0,j.jsx)(a.A,{size:"small",href:(0,x.Ay)("/quickstart/create-a-consumer"),children:"Get started"})})]})}),(0,j.jsx)(d.Ay,{item:!0,xs:12,md:4,children:(0,j.jsxs)(t.A,{style:{height:"100%"},children:[(0,j.jsx)(o.A,{title:"Kernel Module",avatar:(0,j.jsx)(c.A,{}),titleTypographyProps:{variant:"h6"}}),(0,j.jsx)(s.A,{children:"Implement a kernel module with which you can do anything, using gosoline's logging, configuration, and other solutions."}),(0,j.jsx)(i.A,{children:(0,j.jsx)(a.A,{size:"small",href:(0,x.Ay)("/quickstart/create-an-application"),children:"Get started"})})]})})]})})}function y({children:e,snippet:n,...r}){let t=e.replace(/\n$/,"");var i=!1;if(n){const e=new RegExp(`(?://|#) snippet-start: ${n}s*(.*)(?://|#) snippet-end: ${n}s*$`,"sm");let r=t.match(e);r&&(t=r[1],i=!0)}return t=t.split("\n").filter(function(e){return!new RegExp("w*?(?://|#) snippet.*\n*?$","g").test(e)}),i&&(t=t.slice(1,-1)),t=t.join("\n"),(0,j.jsx)(u.A,{...r,children:t})}}}]);