"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6718],{72(e,n,l){l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"reference/package-dbx","title":"Package dbx","description":"The dbx package provides a fluent API to build SQL queries.","source":"@site/docs/reference/package-dbx.mdx","sourceDirName":"reference","slug":"/reference/package-dbx","permalink":"/gosoline/reference/package-dbx","draft":false,"unlisted":false,"editUrl":"https://github.com/justtrackio/gosoline/tree/main/docs/docs/reference/package-dbx.mdx","tags":[],"version":"current","frontMatter":{"title":"Package dbx"},"sidebar":"docSidebar","previous":{"title":"Package cloud/aws","permalink":"/gosoline/reference/package-cloud_aws"},"next":{"title":"Package fixtures","permalink":"/gosoline/reference/package-fixtures"}}');var r=l(4848),i=l(8453);const d={title:"Package dbx"},c="dbx package",a={},t=[{value:"Client",id:"client",level:2},{value:"YourModel struct",id:"yourmodel-struct",level:3},{value:"NewClient()",id:"newclient",level:3},{value:"Usage",id:"usage",level:4},{value:"Description",id:"description",level:4},{value:"Query Builders",id:"query-builders",level:2},{value:"Get()",id:"get",level:3},{value:"Usage",id:"usage-1",level:4},{value:"Description",id:"description-1",level:4},{value:"Select()",id:"select",level:3},{value:"Usage",id:"usage-2",level:4},{value:"Description",id:"description-2",level:4},{value:"Insert()",id:"insert",level:3},{value:"Usage",id:"usage-3",level:4},{value:"Single Insert",id:"single-insert",level:5},{value:"Batch Insert",id:"batch-insert",level:5},{value:"Description",id:"description-3",level:4},{value:"Replace()",id:"replace",level:3},{value:"Usage",id:"usage-4",level:4},{value:"Description",id:"description-4",level:4},{value:"Update()",id:"update",level:3},{value:"Usage",id:"usage-5",level:4},{value:"Description",id:"description-5",level:4},{value:"Delete()",id:"delete",level:3},{value:"Usage",id:"usage-6",level:4},{value:"Description",id:"description-6",level:4},{value:"Error Handling",id:"error-handling",level:2},{value:"ErrNotFound",id:"errnotfound",level:3},{value:"Query Builder Methods",id:"query-builder-methods",level:2},{value:"Distinct()",id:"distinct",level:3},{value:"Join()",id:"join",level:3},{value:"GroupBy()",id:"groupby",level:3},{value:"Having()",id:"having",level:3},{value:"OrderBy()",id:"orderby",level:3},{value:"Limit()",id:"limit",level:3},{value:"Offset()",id:"offset",level:3},{value:"Expressions",id:"expressions",level:2},{value:"Expr",id:"expr",level:3},{value:"ConcatExpr",id:"concatexpr",level:3},{value:"Alias",id:"alias",level:3},{value:"Eq",id:"eq",level:3},{value:"NotEq",id:"noteq",level:3},{value:"Like",id:"like",level:3},{value:"NotLike",id:"notlike",level:3},{value:"ILike",id:"ilike",level:3},{value:"NotILike",id:"notilike",level:3},{value:"Lt",id:"lt",level:3},{value:"LtOrEq",id:"ltoreq",level:3},{value:"Gt",id:"gt",level:3},{value:"GtOrEq",id:"gtoreq",level:3},{value:"And",id:"and",level:3},{value:"Or",id:"or",level:3},{value:"Placeholder Formats",id:"placeholder-formats",level:2},{value:"Question",id:"question",level:3},{value:"Dollar",id:"dollar",level:3}];function o(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"dbx-package",children:"dbx package"})}),"\n",(0,r.jsx)(n.p,{children:"The dbx package provides a fluent API to build SQL queries."}),"\n",(0,r.jsx)(n.h2,{id:"client",children:"Client"}),"\n",(0,r.jsx)(n.p,{children:"The client is the main entry point to the package. It is used to create query builders."}),"\n",(0,r.jsx)(n.h3,{id:"yourmodel-struct",children:"YourModel struct"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type YourModel struct {\n    Id   int    `db:"id"`\n    Name string `db:"name"`\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"newclient",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"NewClient()"})}),"\n",(0,r.jsx)(n.h4,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client, err := dbx.NewClient[YourModel](ctx, config, logger, "default", "your_table")\n'})}),"\n",(0,r.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new dbx client. You need to provide a model (a struct with ",(0,r.jsx)(n.code,{children:"db"})," tags), which will be used to map the database table to your struct."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"clientName"})," argument is the name of the database client to use, as configured in your application's configuration file.",(0,r.jsx)(n.br,{}),"\n","The ",(0,r.jsx)(n.code,{children:"table"})," argument is the name of the database table."]}),"\n",(0,r.jsx)(n.h2,{id:"query-builders",children:"Query Builders"}),"\n",(0,r.jsx)(n.p,{children:"The dbx package provides query builders for SELECT, INSERT, UPDATE, DELETE, and GET statements."}),"\n",(0,r.jsx)(n.h3,{id:"get",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"Get()"})}),"\n",(0,r.jsx)(n.h4,{id:"usage-1",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'result, err := client.Get().Where(dbx.Eq{"id": 1}).Exec(ctx)\nif errors.Is(err, dbx.ErrNotFound) {\n    // handle not found\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE id = 1 LIMIT 2\n"})}),"\n",(0,r.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new GET query builder. This is a convenience method that wraps ",(0,r.jsx)(n.code,{children:"Select()"})," and returns a single element or an error."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Returns a single element of type ",(0,r.jsx)(n.code,{children:"T"})," if exactly one row is found"]}),"\n",(0,r.jsxs)(n.li,{children:["Returns ",(0,r.jsx)(n.code,{children:"dbx.ErrNotFound"})," if no rows match the query"]}),"\n",(0,r.jsx)(n.li,{children:"Returns an error if more than one row is found"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Get"})," builder automatically adds ",(0,r.jsx)(n.code,{children:"LIMIT 2"})," to detect when multiple rows match the query."]}),"\n",(0,r.jsxs)(n.p,{children:["You can also pass a struct of type ",(0,r.jsx)(n.code,{children:"T"})," to the ",(0,r.jsx)(n.code,{children:"Where"})," clause:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"result, err := client.Get().Where(YourModel{Id: 1}).Exec(ctx)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE id = 1 LIMIT 2\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Get"})," builder supports the same methods as the ",(0,r.jsx)(n.code,{children:"Select"})," builder, including ",(0,r.jsx)(n.code,{children:"Join"}),", ",(0,r.jsx)(n.code,{children:"OrderBy"}),", ",(0,r.jsx)(n.code,{children:"GroupBy"}),", and ",(0,r.jsx)(n.code,{children:"Having"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Advanced Usage:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'// Get with JOIN\nresult, err := client.Get().\n    Join("profiles p ON your_table.id = p.user_id").\n    Where(dbx.Eq{"p.verified": true}).\n    Exec(ctx)\n\n// Get with ORDER BY (returns first match after ordering)\nresult, err := client.Get().\n    Where(dbx.Eq{"status": "active"}).\n    OrderBy("created_at DESC").\n    Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"select",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"Select()"})}),"\n",(0,r.jsx)(n.h4,{id:"usage-2",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'results, err := client.Select().Where(dbx.Eq{"id": 1}).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE id = 1\n"})}),"\n",(0,r.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new SELECT query builder. You can use the ",(0,r.jsx)(n.code,{children:"Where"})," method to add conditions to your query. The ",(0,r.jsx)(n.code,{children:"Exec"})," method executes the query and returns the results."]}),"\n",(0,r.jsxs)(n.p,{children:["You can also pass a struct of type ",(0,r.jsx)(n.code,{children:"T"})," to the ",(0,r.jsx)(n.code,{children:"Where"})," clause. In this case, the struct will be converted to a map and the non-zero fields will be used to build an ",(0,r.jsx)(n.code,{children:"Eq"})," expression.\nThis is available for all query builders, not just ",(0,r.jsx)(n.code,{children:"Select"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"results, err := client.Select().Where(YourModel{Id: 1}).Exec(ctx)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE id = 1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"insert",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"Insert()"})}),"\n",(0,r.jsx)(n.h4,{id:"usage-3",children:"Usage"}),"\n",(0,r.jsx)(n.h5,{id:"single-insert",children:"Single Insert"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'_, err := client.Insert(YourModel{Id: 1, Name: "test"}).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"INSERT INTO your_table (id,name) VALUES (1,'test')\n"})}),"\n",(0,r.jsx)(n.h5,{id:"batch-insert",children:"Batch Insert"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'_, err := client.Insert(\n    YourModel{Id: 1, Name: "test1"},\n    YourModel{Id: 2, Name: "test2"},\n).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"INSERT INTO your_table (id,name) VALUES (1,'test1'), (2,'test2');\n"})}),"\n",(0,r.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new INSERT query builder. You need to provide the model with the values to insert. You can also provide multiple models to insert multiple rows at once. The ",(0,r.jsx)(n.code,{children:"Exec"})," method executes the query."]}),"\n",(0,r.jsx)(n.h3,{id:"replace",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"Replace()"})}),"\n",(0,r.jsx)(n.h4,{id:"usage-4",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'_, err := client.Replace(YourModel{Id: 1, Name: "test"}).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"REPLACE INTO your_table (id,name) VALUES (1,'test')\n"})}),"\n",(0,r.jsx)(n.h4,{id:"description-4",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new REPLACE query builder. You need to provide the model with the values to insert. The ",(0,r.jsx)(n.code,{children:"Exec"})," method executes the query."]}),"\n",(0,r.jsx)(n.h3,{id:"update",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"Update()"})}),"\n",(0,r.jsx)(n.h4,{id:"usage-5",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'_, err := client.Update(map[string]any{"name": "new_name"}).Where(dbx.Eq{"id": 1}).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"UPDATE your_table SET name = 'new_name' WHERE id = 1\n"})}),"\n",(0,r.jsx)(n.h4,{id:"description-5",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new UPDATE query builder. You can provide one or more maps with the new values, which will be merged together. You can use the ",(0,r.jsx)(n.code,{children:"Where"})," method to add conditions to your query. The ",(0,r.jsx)(n.code,{children:"Exec"})," method executes the query."]}),"\n",(0,r.jsxs)(n.p,{children:["You can also pass a struct of type ",(0,r.jsx)(n.code,{children:"T"})," to the ",(0,r.jsx)(n.code,{children:"Update"})," method. In this case, the struct will be converted to a map and the non-zero fields will be used to build the ",(0,r.jsx)(n.code,{children:"SET"})," clause of the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'_, err := client.Update(YourModel{Name: "new_name"}).Where(dbx.Eq{"id": 1}).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"UPDATE your_table SET name = 'new_name' WHERE id = 1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"delete",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"Delete()"})}),"\n",(0,r.jsx)(n.h4,{id:"usage-6",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'_, err := client.Delete().Where(dbx.Eq{"id": 1}).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"DELETE FROM your_table WHERE id = 1\n"})}),"\n",(0,r.jsx)(n.h4,{id:"description-6",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new DELETE query builder. You can use the ",(0,r.jsx)(n.code,{children:"Where"})," method to add conditions to your query. The ",(0,r.jsx)(n.code,{children:"Exec"})," method executes the query."]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.h3,{id:"errnotfound",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/client.go",children:"ErrNotFound"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"dbx.ErrNotFound"})," error is returned by the ",(0,r.jsx)(n.code,{children:"Get()"})," method when no rows match the query. You can use ",(0,r.jsx)(n.code,{children:"errors.Is()"})," to check for this error:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'result, err := client.Get().Where(dbx.Eq{"id": 1}).Exec(ctx)\nif errors.Is(err, dbx.ErrNotFound) {\n    // handle not found case\n    return nil, fmt.Errorf("user not found")\n}\nif err != nil {\n    // handle other errors\n    return nil, err\n}\n// use result\n'})}),"\n",(0,r.jsx)(n.h2,{id:"query-builder-methods",children:"Query Builder Methods"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Select"})," and ",(0,r.jsx)(n.code,{children:"Get"})," builders provide the following methods to build complex queries. Note that ",(0,r.jsx)(n.code,{children:"Get"})," automatically adds ",(0,r.jsx)(n.code,{children:"LIMIT 2"})," to detect multiple results."]}),"\n",(0,r.jsx)(n.h3,{id:"distinct",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/select.go",children:"Distinct()"})}),"\n",(0,r.jsxs)(n.p,{children:["Adds a ",(0,r.jsx)(n.code,{children:"DISTINCT"})," clause to the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"results, err := client.Select().Distinct().Exec(ctx)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT DISTINCT id, name FROM your_table\n"})}),"\n",(0,r.jsx)(n.h3,{id:"join",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/select.go",children:"Join()"})}),"\n",(0,r.jsxs)(n.p,{children:["Adds a ",(0,r.jsx)(n.code,{children:"JOIN"})," clause to the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'results, err := client.Select().Join("other_table ON other_table.id = your_table.id").Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table JOIN other_table ON other_table.id = your_table.id\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can also use ",(0,r.jsx)(n.code,{children:"LeftJoin"}),", ",(0,r.jsx)(n.code,{children:"RightJoin"}),", ",(0,r.jsx)(n.code,{children:"InnerJoin"})," and ",(0,r.jsx)(n.code,{children:"CrossJoin"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"groupby",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/select.go",children:"GroupBy()"})}),"\n",(0,r.jsxs)(n.p,{children:["Adds a ",(0,r.jsx)(n.code,{children:"GROUP BY"})," clause to the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'results, err := client.Select().GroupBy("name").Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table GROUP BY name\n"})}),"\n",(0,r.jsx)(n.h3,{id:"having",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/select.go",children:"Having()"})}),"\n",(0,r.jsxs)(n.p,{children:["Adds a ",(0,r.jsx)(n.code,{children:"HAVING"})," clause to the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'results, err := client.Select().GroupBy("name").Having(dbx.Gt{"COUNT(id)": 1}).Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table GROUP BY name HAVING COUNT(id) > 1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"orderby",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/select.go",children:"OrderBy()"})}),"\n",(0,r.jsxs)(n.p,{children:["Adds an ",(0,r.jsx)(n.code,{children:"ORDER BY"})," clause to the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'results, err := client.Select().OrderBy("name DESC").Exec(ctx)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table ORDER BY name DESC\n"})}),"\n",(0,r.jsx)(n.h3,{id:"limit",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/select.go",children:"Limit()"})}),"\n",(0,r.jsxs)(n.p,{children:["Adds a ",(0,r.jsx)(n.code,{children:"LIMIT"})," clause to the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"results, err := client.Select().Limit(10).Exec(ctx)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table LIMIT 10\n"})}),"\n",(0,r.jsx)(n.h3,{id:"offset",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/select.go",children:"Offset()"})}),"\n",(0,r.jsxs)(n.p,{children:["Adds an ",(0,r.jsx)(n.code,{children:"OFFSET"})," clause to the query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"results, err := client.Select().Limit(10).Offset(10).Exec(ctx)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table LIMIT 10 OFFSET 10\n"})}),"\n",(0,r.jsx)(n.h2,{id:"expressions",children:"Expressions"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Sqlizer"})," interface can be converted to SQL. There are many implementations of this interface."]}),"\n",(0,r.jsx)(n.h3,{id:"expr",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"Expr"})}),"\n",(0,r.jsx)(n.p,{children:"Builds an expression from a SQL fragment and arguments."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.Expr("FROM_UNIXTIME(?) > ?", 1672531200, 1000))\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE FROM_UNIXTIME(1672531200) > 1000\n"})}),"\n",(0,r.jsx)(n.h3,{id:"concatexpr",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"ConcatExpr"})}),"\n",(0,r.jsx)(n.p,{children:"Builds an expression by concatenating strings and other expressions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Column(dbx.ConcatExpr("COALESCE(full_name, ", dbx.Expr("CONCAT(?, \' \', ?)", "first", "last"), ")"))\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT COALESCE(full_name, CONCAT('first', ' ', 'last')) FROM your_table\n"})}),"\n",(0,r.jsx)(n.h3,{id:"alias",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"Alias"})}),"\n",(0,r.jsx)(n.p,{children:"Allows to define an alias for a column."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Column(dbx.Alias(dbx.Expr("COUNT(*)"), "total"))\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT (COUNT(*)) AS total FROM your_table\n"})}),"\n",(0,r.jsx)(n.h3,{id:"eq",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"Eq"})}),"\n",(0,r.jsx)(n.p,{children:'Creates an "equal" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.Eq{"id": 1})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE id = 1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"noteq",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"NotEq"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a "not equal" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.NotEq{"id": 1})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE id <> 1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"like",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"Like"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a "like" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.Like{"name": "%test%"})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE name LIKE '%test%'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"notlike",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"NotLike"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a "not like" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.NotLike{"name": "%test%"})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE name NOT LIKE '%test%'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ilike",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"ILike"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a case-insensitive "like" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.ILike{"name": "test%"})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE name ILIKE 'test%'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"notilike",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"NotILike"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a case-insensitive "not like" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.NotILike{"name": "test%"})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE name NOT ILIKE 'test%'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"lt",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"Lt"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a "less than" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.Lt{"age": 18})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE age < 18\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ltoreq",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"LtOrEq"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a "less than or equal" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.LtOrEq{"age": 18})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE age <= 18\n"})}),"\n",(0,r.jsx)(n.h3,{id:"gt",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"Gt"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a "greater than" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.Gt{"age": 18})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE age > 18\n"})}),"\n",(0,r.jsx)(n.h3,{id:"gtoreq",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"GtOrEq"})}),"\n",(0,r.jsx)(n.p,{children:'Creates a "greater than or equal" expression.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.GtOrEq{"age": 18})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE age >= 18\n"})}),"\n",(0,r.jsx)(n.h3,{id:"and",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"And"})}),"\n",(0,r.jsx)(n.p,{children:'Creates an "and" conjunction of expressions.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.And(dbx.Eq{"id": 1}, dbx.Like{"name": "%test%"}))\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE (id = 1 AND name LIKE '%test%')\n"})}),"\n",(0,r.jsx)(n.h3,{id:"or",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/expr.go",children:"Or"})}),"\n",(0,r.jsx)(n.p,{children:'Creates an "or" conjunction of expressions.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'client.Select().Where(dbx.Or(dbx.Eq{"id": 1}, dbx.Eq{"id": 2}))\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT id, name FROM your_table WHERE (id = 1 OR id = 2)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"placeholder-formats",children:"Placeholder Formats"}),"\n",(0,r.jsxs)(n.p,{children:["The dbx package supports two placeholder formats: ",(0,r.jsx)(n.code,{children:"Question"})," and ",(0,r.jsx)(n.code,{children:"Dollar"}),". The default is ",(0,r.jsx)(n.code,{children:"Question"}),". You can change the placeholder format by passing it to the ",(0,r.jsx)(n.code,{children:"NewClientWithInterfaces"})," function."]}),"\n",(0,r.jsx)(n.h3,{id:"question",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/placeholder.go",children:"Question"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Question"})," format uses ",(0,r.jsx)(n.code,{children:"?"})," as a placeholder."]}),"\n",(0,r.jsx)(n.h3,{id:"dollar",children:(0,r.jsx)(n.a,{href:"https://github.com/justtrackio/gosoline/blob/main/pkg/dbx/placeholder.go",children:"Dollar"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Dollar"})," format uses ",(0,r.jsx)(n.code,{children:"$"})," as a placeholder."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);