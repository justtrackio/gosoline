"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3911],{8728(e,o,n){n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>p,default:()=>s,frontMatter:()=>a,metadata:()=>l,toc:()=>g});const l=JSON.parse('{"id":"quickstart/create-an-application","title":"Create an application","description":"For running a simple gosoline application we use the following 3 files:","source":"@site/docs/quickstart/create-an-application.mdx","sourceDirName":"quickstart","slug":"/quickstart/create-an-application","permalink":"/gosoline/quickstart/create-an-application","draft":false,"unlisted":false,"editUrl":"https://github.com/justtrackio/gosoline/tree/main/docs/docs/quickstart/create-an-application.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Create an application"},"sidebar":"docSidebar","previous":{"title":"Create a consumer","permalink":"/gosoline/quickstart/create-a-consumer"},"next":{"title":"Testing","permalink":"/gosoline/category/testing"}}');var i=n(4848),r=n(8453),t=n(3457);const a={sidebar_position:3,title:"Create an application"},p="Create an application",c={},g=[{value:"Create the kernel module",id:"create-the-kernel-module",level:2},{value:"Create the main file",id:"create-the-main-file",level:2},{value:"Create the config file",id:"create-the-config-file",level:2},{value:"Application output",id:"application-output",level:2}];function d(e){const o={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"create-an-application",children:"Create an application"})}),"\n",(0,i.jsx)(o.p,{children:"For running a simple gosoline application we use the following 3 files:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"module.go"})," \u2192 kernel module with business logic"]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"config.dist.yml"})," \u2192 base configuration file"]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"main.go"})," \u2192 setup and run the application"]}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"create-the-kernel-module",children:"Create the kernel module"}),"\n",(0,i.jsxs)(o.p,{children:["The kernel module contains the actual application logic. The ",(0,i.jsx)(o.code,{children:"HelloWorldModule"})," struct has to implement the\n",(0,i.jsx)(o.code,{children:"kernel.Module"})," interface. The func ",(0,i.jsx)(o.code,{children:"NewHelloWorldModule"})," is of the type ",(0,i.jsx)(o.code,{children:"kernel.ModuleFactory"})," and is used to add\nthe module to the application."]}),"\n",(0,i.jsx)(t.A,{showLineNumbers:!0,language:"go",title:"module.go",children:'package main\n\nimport (\n\t"context"\n\n\t"github.com/justtrackio/gosoline/pkg/cfg"\n\t"github.com/justtrackio/gosoline/pkg/kernel"\n\t"github.com/justtrackio/gosoline/pkg/log"\n)\n\nfunc NewHelloWorldModule(ctx context.Context, config cfg.Config, logger log.Logger) (kernel.Module, error) {\n\treturn &HelloWorldModule{\n\t\tlogger: logger.WithChannel("hello-world"),\n\t}, nil\n}\n\ntype HelloWorldModule struct {\n\tlogger log.Logger\n}\n\nfunc (h HelloWorldModule) Run(ctx context.Context) error {\n\th.logger.Info(ctx, "Hello World")\n\n\treturn nil\n}\n'}),"\n",(0,i.jsx)(o.h2,{id:"create-the-main-file",children:"Create the main file"}),"\n",(0,i.jsxs)(o.p,{children:["In the main function, we're running the application by adding the ",(0,i.jsx)(o.code,{children:"HelloWorldModule"})," to the kernel via the\n",(0,i.jsx)(o.code,{children:"NewHelloWorldModule"})," factory."]}),"\n",(0,i.jsx)(t.A,{showLineNumbers:!0,language:"go",title:"main.go",children:'package main\n\nimport "github.com/justtrackio/gosoline/pkg/application"\n\nfunc main() {\n\tapplication.Run(\n\t\tapplication.WithModuleFactory("hello-world", NewHelloWorldModule),\n\t)\n}\n'}),"\n",(0,i.jsx)(o.h2,{id:"create-the-config-file",children:"Create the config file"}),"\n",(0,i.jsx)(o.p,{children:"The last missing piece for a minimal gosoline application is the default config file which is distributed with the\napplication. For a minimal version it has at least the application identifiers and enviroment value."}),"\n",(0,i.jsx)(t.A,{showLineNumbers:!0,language:"yaml",title:"config.dist.yml",children:"env: dev\napp_project: gosoline\napp_family: get-started\napp_group: grp\napp_name: hello-world"}),"\n",(0,i.jsx)(o.h2,{id:"application-output",children:"Application output"}),"\n",(0,i.jsx)(o.p,{children:"Running the application will result in the following output:"}),"\n",(0,i.jsx)(t.A,{showLineNumbers:!0,language:"text",title:"stdout",children:"08:43:03.536 main    info    applied priority 1 config post processor 'gosoline.dx.autoCreate'  application: hello-world, group: grp\n08:43:03.536 main    info    applied priority 1 config post processor 'gosoline.dx.useRandomPort'  application: hello-world, group: grp\n08:43:03.536 main    info    applied priority 8 config post processor 'gosoline.log.handler_main'  application: hello-world, group: grp\n07:43:03.537 kernel  info    starting kernel                                     application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg api.health.path=/health                         application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg api.health.port=0                               application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg app_family=get-started                          application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg app_group=grp                                   application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg app_name=hello-world                            application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg app_project=gosoline                            application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg appctx.metadata.server.port=0                   application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg dx.auto_create=true                             application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg dx.use_random_port=true                         application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg env=dev                                         application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg kernel.health_check.timeout=1m0s                application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg kernel.health_check.wait_interval=3s            application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg kernel.kill_timeout=10s                         application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg log.handlers.main.formatter=console             application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg log.handlers.main.level=info                    application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg log.handlers.main.timestamp_format=15:04:05.000  application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg log.handlers.main.type=iowriter                 application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg log.handlers.main.writer=stdout                 application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.application={app_name}                   application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.cloudwatch.naming.pattern={project}/{env}/{family}/{group}-{app}  application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.enabled=false                            application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.environment={env}                        application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.family={app_family}                      application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.group={app_group}                        application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.interval=1m0s                            application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.project={app_project}                    application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg metric.writer=                                  application: hello-world, group: grp\n07:43:03.537 kernel  info    cfg fingerprint: f673796f9852c4b7e669201638f06f60   application: hello-world, group: grp\n07:43:03.537 kernel  info    stage 0 up and running with 1 modules               application: hello-world, group: grp\n07:43:03.538 kernel  info    running background module metric in stage 0         application: hello-world, group: grp\n07:43:03.538 kernel  info    stage 1024 up and running with 2 modules            application: hello-world, group: grp\n07:43:03.538 kernel  info    stage 2048 up and running with 1 modules            application: hello-world, group: grp\n07:43:03.538 kernel  info    kernel up and running                               application: hello-world, group: grp\n07:43:03.538 kernel  info    running background module api-health-check in stage 1024  application: hello-world, group: grp\n07:43:03.538 metrics info    metrics not enabled..                               application: hello-world, group: grp\n07:43:03.538 kernel  info    running background module metadata-server in stage 1024  application: hello-world, group: grp\n07:43:03.538 kernel  info    stopped background module metric                    application: hello-world, group: grp\n07:43:03.538 kernel  info    running foreground module hello-world in stage 2048  application: hello-world, group: grp\n07:43:03.538 hello-world info    Hello World                                         application: hello-world, group: grp\n07:43:03.538 kernel  info    stopped foreground module hello-world               application: hello-world, group: grp\n07:43:03.538 kernel  info    stopping kernel due to: no more foreground modules in running state  application: hello-world, group: grp\n07:43:03.538 kernel  info    stopping stage 2048                                 application: hello-world, group: grp\n07:43:03.538 kernel  info    stopped stage 2048                                  application: hello-world, group: grp\n07:43:03.538 kernel  info    stopping stage 1024                                 application: hello-world, group: grp\n07:43:03.538 kernel  info    stopped background module api-health-check          application: hello-world, group: grp\n07:43:03.538 metadata-server info    serving metadata on address [::]:45745              application: hello-world, group: grp\n07:43:03.538 kernel  info    stopped background module metadata-server           application: hello-world, group: grp\n07:43:03.538 kernel  info    stopped stage 1024                                  application: hello-world, group: grp\n07:43:03.538 kernel  info    stopping stage 0                                    application: hello-world, group: grp\n07:43:03.538 kernel  info    stopped stage 0                                     application: hello-world, group: grp\n07:43:03.538 kernel  info    leaving kernel with exit code 0                     application: hello-world, group: grp\n"})]})}function s(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);