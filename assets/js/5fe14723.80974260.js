"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7422],{832(n,e,o){o.r(e),o.d(e,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>g,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"how-to/logging/use-loggers","title":"Use loggers","description":"With gosoline, there are multiple ways to configure and use a logger.","source":"@site/docs/how-to/logging/use-loggers.mdx","sourceDirName":"how-to/logging","slug":"/how-to/logging/use-loggers","permalink":"/gosoline/how-to/logging/use-loggers","draft":false,"unlisted":false,"editUrl":"https://github.com/justtrackio/gosoline/tree/main/docs/docs/how-to/logging/use-loggers.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Use loggers"},"sidebar":"docSidebar","previous":{"title":"Load configurations","permalink":"/gosoline/how-to/load-configs"},"next":{"title":"Sampling & fingers-crossed","permalink":"/gosoline/how-to/logging/sampling-and-fingers-crossed"}}');var t=o(4848),i=o(8453),r=o(3457);const g={sidebar_position:2,title:"Use loggers"},a=void 0,s={},c=[{value:"Implement a logger directly in code",id:"implement-a-logger-directly-in-code",level:2},{value:"Implement a logger with an app configuration",id:"implement-a-logger-with-an-app-configuration",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"With gosoline, there are multiple ways to configure and use a logger."}),"\n",(0,t.jsx)(e.h2,{id:"implement-a-logger-directly-in-code",children:"Implement a logger directly in code"}),"\n",(0,t.jsx)(e.p,{children:"One way to implement a logger is using log functions, without appealing to an external configuration:"}),"\n",(0,t.jsx)(r.A,{showLineNumbers:!0,language:"go",title:"main.go",children:'package main\n\nimport (\n\t"context"\n\t"os"\n\n\t// 1\n\t"github.com/justtrackio/gosoline/pkg/cfg"\n\t"github.com/justtrackio/gosoline/pkg/log"\n)\n\nfunc main() {\n\tctx := context.Background()\n\t// 2\n\tlogHandler := log.NewHandlerIoWriter(\n\t\tcfg.New(), log.PriorityInfo, log.FormatterConsole, "main", "15:04:05.000", os.Stdout,\n\t)\n\n\t// 3\n\tloggerOptions := []log.Option{log.WithHandlers(logHandler)}\n\n\t// 4\n\tlogger := log.NewLogger()\n\n\t// 5\n\tif err := logger.Option(loggerOptions...); err != nil {\n\t\tlogger.Error(ctx, "Failed to apply logger options: %w", err)\n\t\tos.Exit(1)\n\t}\n\n\tlogger.Info(ctx, "Message")\n}\n'}),"\n",(0,t.jsx)(e.p,{children:"Here, you:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["Import the ",(0,t.jsx)(e.code,{children:"cfg"})," package."]}),"\n",(0,t.jsx)(e.li,{children:"Create a new handler for sending logs to STDOUT."}),"\n",(0,t.jsx)(e.li,{children:"Create a log option that includes your handler."}),"\n",(0,t.jsx)(e.li,{children:"Create your logger."}),"\n",(0,t.jsx)(e.li,{children:"Apply the options."}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"implement-a-logger-with-an-app-configuration",children:"Implement a logger with an app configuration"}),"\n",(0,t.jsx)(e.p,{children:"If you have an application, you can create a logger from your app's configuration."}),"\n",(0,t.jsx)(e.p,{children:"First, configure your logger in your configuration. For example, in a config file:"}),"\n",(0,t.jsx)(r.A,{showLineNumbers:!0,language:"yml",title:"config.dist.yml",children:"env: dev\napp_project: gosoline\napp_family: get-started\napp_group: grp\napp_name: hello-world\n\n// highlight-start\nlog:\n    level: info\n    handlers:\n        main:\n            type: iowriter\n            channels:\n                metrics:\n                    level: error\n                http:\n                    level: error\n            formatter: console\n            level: info\n            timestamp_format: 15:04:05.000\n            writer: stdout\n// highlight-end\n"}),"\n",(0,t.jsx)(e.p,{children:"Then, implement your logger alongside your application:"}),"\n",(0,t.jsx)(r.A,{showLineNumbers:!0,language:"go",title:"main.go",children:'package main\n\nimport (\n\t"context"\n\n\t"github.com/justtrackio/gosoline/pkg/application"\n\t"github.com/justtrackio/gosoline/pkg/cfg"\n\t"github.com/justtrackio/gosoline/pkg/kernel"\n\t"github.com/justtrackio/gosoline/pkg/log"\n)\n\nfunc NewHelloWorldModule(ctx context.Context, config cfg.Config, logger log.Logger) (kernel.Module, error) {\n\treturn &HelloWorldModule{\n\t\t// highlight-next-line\n\t\tlogger: logger.WithChannel("hello-world"),\n\t}, nil\n}\n\ntype HelloWorldModule struct {\n\t// highlight-next-line\n\tlogger log.Logger\n}\n\nfunc (h HelloWorldModule) Run(ctx context.Context) error {\n\t// highlight-next-line\n\th.logger.Info(ctx, "Hello World")\n\n\treturn nil\n}\n\nfunc main() {\n\tapplication.Run(\n\t\tapplication.WithModuleFactory("hello-world", NewHelloWorldModule),\n\t)\n}\n'}),"\n",(0,t.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(e.p,{children:"In this guide, you've learned multiple ways to implement a logger with gosoline."}),"\n",(0,t.jsx)(e.p,{children:"Check out these resources to learn more about logging with gosoline:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"/how-to/logging/implement-a-log-handler",children:"Implement a log handler"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"/reference/package-log",children:"API reference for the log package"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);