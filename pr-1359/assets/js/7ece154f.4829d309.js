"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6255],{3452(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"reference/naming-patterns","title":"Naming patterns","description":"Gosoline uses naming patterns to generate consistent names for resources (SQS queues, SNS topics, DynamoDB tables, Kafka topics, Redis keys, metric namespaces, tracing service names, ...).","source":"@site/docs/reference/naming-patterns.mdx","sourceDirName":"reference","slug":"/reference/naming-patterns","permalink":"/gosoline/pr-1359/reference/naming-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/justtrackio/gosoline/tree/main/docs/docs/reference/naming-patterns.mdx","tags":[],"version":"current","frontMatter":{"title":"Naming patterns"},"sidebar":"docSidebar","previous":{"title":"Reference","permalink":"/gosoline/pr-1359/category/reference"},"next":{"title":"Package cfg","permalink":"/gosoline/pr-1359/reference/package-cfg"}}');var l=i(4848),r=i(8453);const c={title:"Naming patterns"},d="Naming patterns",a={},t=[{value:"How env vars map to config keys",id:"how-env-vars-map-to-config-keys",level:2},{value:"Global placeholders",id:"global-placeholders",level:2},{value:"<code>app.namespace</code>",id:"appnamespace",level:3},{value:"Available naming patterns",id:"available-naming-patterns",level:2},{value:"App identity",id:"app-identity",level:3},{value:"AWS SQS queues",id:"aws-sqs-queues",level:3},{value:"AWS SNS topics",id:"aws-sns-topics",level:3},{value:"AWS Kinesis",id:"aws-kinesis",level:3},{value:"AWS S3 buckets",id:"aws-s3-buckets",level:3},{value:"DynamoDB tables (<code>pkg/ddb</code>)",id:"dynamodb-tables-pkgddb",level:3},{value:"Kafka",id:"kafka",level:3},{value:"Redis client naming (<code>pkg/redis</code>)",id:"redis-client-naming-pkgredis",level:3},{value:"KvStore Redis key pattern (<code>pkg/kvstore</code>)",id:"kvstore-redis-key-pattern-pkgkvstore",level:3},{value:"Metrics",id:"metrics",level:3},{value:"Tracing",id:"tracing",level:3},{value:"DDB leader election table (<code>pkg/conc/ddb</code>)",id:"ddb-leader-election-table-pkgconcddb",level:3},{value:"Metric calculator leader election table",id:"metric-calculator-leader-election-table",level:3},{value:"Kinsumer autoscale leader election table",id:"kinsumer-autoscale-leader-election-table",level:3},{value:"ModelId domain pattern (canonical IDs)",id:"modelid-domain-pattern-canonical-ids",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"naming-patterns",children:"Naming patterns"})}),"\n",(0,l.jsx)(n.p,{children:"Gosoline uses naming patterns to generate consistent names for resources (SQS queues, SNS topics, DynamoDB tables, Kafka topics, Redis keys, metric namespaces, tracing service names, ...)."}),"\n",(0,l.jsxs)(n.p,{children:["Naming patterns are plain strings with placeholders (macros). They are configured via config keys (e.g. in ",(0,l.jsx)(n.code,{children:"config.dist.yml"}),") and can be overridden via environment variables."]}),"\n",(0,l.jsx)(n.h2,{id:"how-env-vars-map-to-config-keys",children:"How env vars map to config keys"}),"\n",(0,l.jsx)(n.p,{children:"Environment variable keys are derived from config keys:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Uppercase"}),"\n",(0,l.jsxs)(n.li,{children:["Replace ",(0,l.jsx)(n.code,{children:"."})," and ",(0,l.jsx)(n.code,{children:"-"})," with ",(0,l.jsx)(n.code,{children:"_"})," (via ",(0,l.jsx)(n.code,{children:"cfg.DefaultEnvKeyReplacer"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:["Optionally prepend an env var prefix (e.g. ",(0,l.jsx)(n.code,{children:"GOSO_"}),") if you configure one"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Example (no prefix):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export CLOUD_AWS_SQS_CLIENTS_DEFAULT_NAMING_QUEUE_PATTERN="{app.namespace}-{queueId}"\n'})}),"\n",(0,l.jsx)(n.p,{children:"Example (with prefix):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export GOSO_CLOUD_AWS_SQS_CLIENTS_DEFAULT_NAMING_QUEUE_PATTERN="{app.namespace}-{queueId}"\n'})}),"\n",(0,l.jsx)(n.p,{children:"To use a prefix in code, configure it when building your app config:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// application option\napplication.WithConfigEnvKeyPrefix("goso")\n\n// or cfg option\ncfg.WithEnvKeyPrefix("goso")\n'})}),"\n",(0,l.jsx)(n.h2,{id:"global-placeholders",children:"Global placeholders"}),"\n",(0,l.jsxs)(n.p,{children:["These placeholders come from ",(0,l.jsx)(n.code,{children:"cfg.AppIdentity"})," and work in all ",(0,l.jsx)(n.code,{children:"AppIdentity.Format()"})," based patterns:"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Placeholder"}),(0,l.jsx)(n.th,{children:"Config source"}),(0,l.jsx)(n.th,{children:"Meaning"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{app.env}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"app.env"})}),(0,l.jsx)(n.td,{children:"Environment"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{app.name}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"app.name"})}),(0,l.jsx)(n.td,{children:"Application name"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{app.tags.<key>}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"app.tags.<key>"})}),(0,l.jsx)(n.td,{children:"Any tag value (dynamic)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{app.namespace}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"app.namespace"})}),(0,l.jsx)(n.td,{children:"A reusable namespace pattern (see next section)"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"appnamespace",children:(0,l.jsx)(n.code,{children:"app.namespace"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"app.namespace"})," itself is a pattern, typically defined with dot-separated placeholders."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'app:\n  namespace: "{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["When ",(0,l.jsx)(n.code,{children:"{app.namespace}"})," is used in a naming pattern, the service-specific delimiter replaces the dots."]}),"\n",(0,l.jsx)(n.h2,{id:"available-naming-patterns",children:"Available naming patterns"}),"\n",(0,l.jsx)(n.h3,{id:"app-identity",children:"App identity"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"app.env"})," (string)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"app.name"})," (string)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"app.tags.<key>"})," (map)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"app.namespace"})," (pattern string)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"app.namespace"})," has no delimiter of its own; it is expanded using the delimiter of the pattern that references it."]}),"\n",(0,l.jsx)(n.h3,{id:"aws-sqs-queues",children:"AWS SQS queues"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.sqs.clients.<client_name>.naming.queue_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{queueId}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.sqs.clients.<client_name>.naming.queue_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{queueId}"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Env var (example for ",(0,l.jsx)(n.code,{children:"default"})," client, with prefix ",(0,l.jsx)(n.code,{children:"GOSO_"}),"):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export GOSO_CLOUD_AWS_SQS_CLIENTS_DEFAULT_NAMING_QUEUE_PATTERN="{app.namespace}-{queueId}"\nexport GOSO_CLOUD_AWS_SQS_CLIENTS_DEFAULT_NAMING_QUEUE_DELIMITER="-"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"aws-sns-topics",children:"AWS SNS topics"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.sns.clients.<client_name>.naming.topic_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{topicId}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.sns.clients.<client_name>.naming.topic_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{topicId}"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"aws-kinesis",children:"AWS Kinesis"}),"\n",(0,l.jsx)(n.p,{children:"Kinesis has three independent patterns:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Streams"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.kinesis.clients.<client_name>.naming.stream_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{streamName}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.kinesis.clients.<client_name>.naming.stream_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{streamName}"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Kinsumer metadata table (DynamoDB)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.kinesis.clients.<client_name>.naming.metadata_table_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-kinsumer-metadata"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.kinesis.clients.<client_name>.naming.metadata_table_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Kinsumer metadata namespace (record prefix inside the metadata table)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.kinesis.clients.<client_name>.naming.metadata_namespace_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{app.name}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.kinesis.clients.<client_name>.naming.metadata_namespace_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"aws-s3-buckets",children:"AWS S3 buckets"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.s3.clients.<client_name>.naming.bucket_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.s3.clients.<client_name>.naming.delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{bucketId}"})]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"dynamodb-tables-pkgddb",children:["DynamoDB tables (",(0,l.jsx)(n.code,{children:"pkg/ddb"}),")"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.dynamodb.clients.<client_name>.naming.table_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{name}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"cloud.aws.dynamodb.clients.<client_name>.naming.table_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{name}"})," (from ",(0,l.jsx)(n.code,{children:"mdl.ModelId.Name"}),")"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"kafka",children:"Kafka"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Topics"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"kafka.naming.topic_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{topicId}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"kafka.naming.topic_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{topicId}"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Consumer groups"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"kafka.naming.group_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{app.name}-{groupId}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"kafka.naming.group_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{groupId}"})]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"redis-client-naming-pkgredis",children:["Redis client naming (",(0,l.jsx)(n.code,{children:"pkg/redis"}),")"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Address pattern"})," (used when ",(0,l.jsx)(n.code,{children:"redis.<name>.address"})," is empty)"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"redis.<client_name>.naming.address_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{name}.{app.tags.group}.redis.{app.env}.{app.tags.family}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"redis.<client_name>.naming.address_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"."})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{name}"})," (the redis client name)"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Key pattern"})," (prefixing keys)"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"redis.<client_name>.naming.key_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{key}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"redis.<client_name>.naming.key_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{key}"})]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"kvstore-redis-key-pattern-pkgkvstore",children:["KvStore Redis key pattern (",(0,l.jsx)(n.code,{children:"pkg/kvstore"}),")"]}),"\n",(0,l.jsxs)(n.p,{children:["KvStore expands ",(0,l.jsx)(n.code,{children:"{store}"})," first and then passes the pattern to the underlying Redis naming."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key (store-specific):"})," ",(0,l.jsx)(n.code,{children:"kvstore.<name>.redis.key_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key (global default):"})," ",(0,l.jsx)(n.code,{children:"kvstore.default.redis.key_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-kvstore-{store}-{key}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Extra placeholders:"})," ",(0,l.jsx)(n.code,{children:"{store}"}),", ",(0,l.jsx)(n.code,{children:"{key}"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"metrics",children:"Metrics"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"CloudWatch namespace"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"metric.writer_settings.cloudwatch.naming.namespace_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{app.name}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"metric.writer_settings.cloudwatch.naming.namespace_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"/"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Prometheus namespace prefix"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"metric.writer_settings.prometheus.naming.namespace_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{app.name}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"metric.writer_settings.prometheus.naming.namespace_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"_"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"tracing",children:"Tracing"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Tracing service name"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"tracing.naming.pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.namespace}-{app.name}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"tracing.naming.delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"AWS X-Ray daemon SRV lookup name"})," (used when ",(0,l.jsx)(n.code,{children:"tracing.xray.addr_type: srv"})," and ",(0,l.jsx)(n.code,{children:"tracing.xray.add_value"})," is empty)"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"tracing.xray.srv_naming.pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"xray.{app.namespace}"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"tracing.xray.srv_naming.delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"."})]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"ddb-leader-election-table-pkgconcddb",children:["DDB leader election table (",(0,l.jsx)(n.code,{children:"pkg/conc/ddb"}),")"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"conc.leader_election.<name>.naming.table_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.tags.project}-{app.env}-{app.tags.family}-leader-elections"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"conc.leader_election.<name>.naming.table_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"metric-calculator-leader-election-table",children:"Metric calculator leader election table"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"metric.calculator.dynamodb.naming.table_pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.env}-metric-calculator-leaders"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Delimiter config key:"})," ",(0,l.jsx)(n.code,{children:"metric.calculator.dynamodb.naming.table_delimiter"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default delimiter:"})," ",(0,l.jsx)(n.code,{children:"-"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"kinsumer-autoscale-leader-election-table",children:"Kinsumer autoscale leader election table"}),"\n",(0,l.jsx)(n.p,{children:"Kinsumer autoscale provides a table pattern which is used to configure the underlying DDB leader election module."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"kinsumer.autoscale.dynamodb.naming.pattern"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default:"})," ",(0,l.jsx)(n.code,{children:"{app.env}-kinsumer-autoscale-leaders"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["If you need to adjust the delimiter, configure the leader election settings (e.g. ",(0,l.jsx)(n.code,{children:"conc.leader_election.<name>.naming.table_delimiter"}),")."]}),"\n",(0,l.jsx)(n.h2,{id:"modelid-domain-pattern-canonical-ids",children:"ModelId domain pattern (canonical IDs)"}),"\n",(0,l.jsxs)(n.p,{children:["The canonical ",(0,l.jsx)(n.code,{children:"mdl.ModelId"})," string form is configured via:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config key:"})," ",(0,l.jsx)(n.code,{children:"app.model_id.domain_pattern"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Rules:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Placeholders must be separated by dots (",(0,l.jsx)(n.code,{children:"."}),")"]}),"\n",(0,l.jsx)(n.li,{children:"No static text is allowed"}),"\n",(0,l.jsx)(n.li,{children:"The model name is appended automatically as the last segment"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'app:\n  model_id:\n    domain_pattern: "{app.tags.project}.{app.env}"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>c,x:()=>d});var s=i(6540);const l={},r=s.createContext(l);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);