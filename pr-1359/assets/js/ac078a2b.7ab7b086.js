"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9297],{8453(e,n,s){s.d(n,{R:()=>r,x:()=>l});var i=s(6540);const d={},t=i.createContext(d);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),i.createElement(t.Provider,{value:n},e.children)}},9530(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"migrations/app-identity-and-naming-patterns","title":"App Identity and Naming Patterns","description":"This guide details how to migrate your gosoline application to the new AppIdentity system and dynamic resource naming.","source":"@site/docs/migrations/app-identity-and-naming-patterns.mdx","sourceDirName":"migrations","slug":"/migrations/app-identity-and-naming-patterns","permalink":"/gosoline/pr-1359/migrations/app-identity-and-naming-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/justtrackio/gosoline/tree/main/docs/docs/migrations/app-identity-and-naming-patterns.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"App Identity and Naming Patterns"},"sidebar":"docSidebar","previous":{"title":"Migrations","permalink":"/gosoline/pr-1359/category/migrations"}}');var d=s(4848),t=s(8453);const r={sidebar_position:1,title:"App Identity and Naming Patterns"},l="Migrating to AppIdentity and Naming Patterns",c={},a=[{value:"1. Update Configuration",id:"1-update-configuration",level:2},{value:"Basic Identity",id:"basic-identity",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"2. Update Resource Naming Patterns",id:"2-update-resource-naming-patterns",level:2},{value:"Namespace Pattern",id:"namespace-pattern",level:3},{value:"Delimiter Configuration",id:"delimiter-configuration",level:3},{value:"Placeholder Mapping",id:"placeholder-mapping",level:3},{value:"Example: SQS Pattern Update",id:"example-sqs-pattern-update",level:3},{value:"DynamoDB Table Naming",id:"dynamodb-table-naming",level:3},{value:"3. Update Go Code",id:"3-update-go-code",level:2},{value:"<code>cfg.AppId</code> is now <code>cfg.AppIdentity</code>",id:"cfgappid-is-now-cfgappidentity",level:3},{value:"<code>mdl.ModelId</code> Refactoring",id:"mdlmodelid-refactoring",level:3},{value:"ModelId Domain Pattern",id:"modelid-domain-pattern",level:3},{value:"<code>pkg/parquet</code> Removed",id:"pkgparquet-removed",level:3},{value:"4. Redis Key Prefixing",id:"4-redis-key-prefixing",level:2},{value:"5. Stream Input/Output Configuration",id:"5-stream-inputoutput-configuration",level:2},{value:"General Change",id:"general-change",level:3},{value:"SQS Input",id:"sqs-input",level:3},{value:"SNS Input",id:"sns-input",level:3},{value:"Kafka and Kinesis Inputs",id:"kafka-and-kinesis-inputs",level:3},{value:"mdlsub Publisher Configuration",id:"mdlsub-publisher-configuration",level:3},{value:"6. Reference: Naming Patterns per Service",id:"6-reference-naming-patterns-per-service",level:2},{value:"SQS Queue Naming",id:"sqs-queue-naming",level:3},{value:"SNS Topic Naming",id:"sns-topic-naming",level:3},{value:"Kinesis Stream Naming",id:"kinesis-stream-naming",level:3},{value:"Kinesis Metadata Table",id:"kinesis-metadata-table",level:4},{value:"Kinesis Metadata Namespace",id:"kinesis-metadata-namespace",level:4},{value:"Kafka Naming",id:"kafka-naming",level:3},{value:"DynamoDB Table Naming",id:"dynamodb-table-naming-1",level:3},{value:"DynamoDB Leader Election Table",id:"dynamodb-leader-election-table",level:3},{value:"Metric Calculator DynamoDB Table",id:"metric-calculator-dynamodb-table",level:3},{value:"CloudWatch Namespace",id:"cloudwatch-namespace",level:3},{value:"Prometheus Namespace",id:"prometheus-namespace",level:3},{value:"Redis Key Prefix",id:"redis-key-prefix",level:3},{value:"KvStore Redis Key Pattern",id:"kvstore-redis-key-pattern",level:3},{value:"Tracing Service Name",id:"tracing-service-name",level:3},{value:"Blob / S3 Bucket Patterns",id:"blob--s3-bucket-patterns",level:3},{value:"Quick Start: Minimal Backward-Compatible Configuration",id:"quick-start-minimal-backward-compatible-configuration",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"migrating-to-appidentity-and-naming-patterns",children:"Migrating to AppIdentity and Naming Patterns"})}),"\n",(0,d.jsxs)(n.p,{children:["This guide details how to migrate your gosoline application to the new ",(0,d.jsx)(n.code,{children:"AppIdentity"})," system and dynamic resource naming."]}),"\n",(0,d.jsx)(n.h2,{id:"1-update-configuration",children:"1. Update Configuration"}),"\n",(0,d.jsxs)(n.p,{children:["The flat application hierarchy (",(0,d.jsx)(n.code,{children:"project"}),", ",(0,d.jsx)(n.code,{children:"family"}),", ",(0,d.jsx)(n.code,{children:"group"}),") has been replaced with a flexible tagging system. Move these keys into the ",(0,d.jsx)(n.code,{children:"app.tags"})," structure."]}),"\n",(0,d.jsx)(n.h3,{id:"basic-identity",children:"Basic Identity"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.strong,{children:["Old ",(0,d.jsx)(n.code,{children:"config.yml"}),":"]})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"env: production\napp_project: justtrack\napp_family: platform\napp_group: core\napp_name: my-service\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.strong,{children:["New ",(0,d.jsx)(n.code,{children:"config.yml"}),":"]})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'app:\n  env: production\n  name: my-service\n  namespace: "{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"\n  tags:\n    project: justtrack\n    family: platform\n    group: core\n'})}),"\n",(0,d.jsx)(n.admonition,{type:"info",children:(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"app.namespace"})," configuration is optional but recommended. It defines a reusable namespace pattern that can be referenced as ",(0,d.jsx)(n.code,{children:"{app.namespace}"})," in all resource naming patterns. See the ",(0,d.jsx)(n.a,{href:"#namespace-pattern",children:"Namespace Pattern"})," section for details."]})}),"\n",(0,d.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,d.jsx)(n.p,{children:"If you configure your app via environment variables, update the keys:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{style:{textAlign:"left"},children:"Old Variable"}),(0,d.jsx)(n.th,{style:{textAlign:"left"},children:"New Variable"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_PROJECT"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_TAGS_PROJECT"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_FAMILY"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_TAGS_FAMILY"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_GROUP"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_TAGS_GROUP"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_NAME"})}),(0,d.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,d.jsx)(n.code,{children:"GOSO_APP_NAME"})," (no change)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_ENV"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_ENV"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:"N/A (new feature)"}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"GOSO_APP_NAMESPACE"})})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"2-update-resource-naming-patterns",children:"2. Update Resource Naming Patterns"}),"\n",(0,d.jsxs)(n.admonition,{type:"warning",children:[(0,d.jsxs)(n.p,{children:["The default naming patterns for most services have changed to use ",(0,d.jsx)(n.code,{children:"{app.namespace}"})," instead of explicit tag placeholders. If you don't configure ",(0,d.jsx)(n.code,{children:"app.namespace"}),", your resource names will be missing the project/family/group prefix. For backward compatibility, configure:"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'app:\n  namespace: "{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"\n'})})]}),"\n",(0,d.jsx)(n.h3,{id:"namespace-pattern",children:"Namespace Pattern"}),"\n",(0,d.jsxs)(n.p,{children:["A new ",(0,d.jsx)(n.code,{children:"app.namespace"})," configuration option allows you to define a reusable namespace pattern referenced in all resource naming patterns."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Config Key:"})," ",(0,d.jsx)(n.code,{children:"app.namespace"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Format:"})," A pattern using dots (",(0,d.jsx)(n.code,{children:"."}),") as delimiters, with standard ",(0,d.jsx)(n.code,{children:"{app.*}"})," and ",(0,d.jsx)(n.code,{children:"{app.tags.*}"})," placeholders"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Usage:"})," Reference as ",(0,d.jsx)(n.code,{children:"{app.namespace}"})," in any resource naming pattern"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'app:\n  namespace: "{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"\n  tags:\n    project: justtrack\n    family: platform\n    group: core\n  env: production\n\ncloud:\n  aws:\n    sqs:\n      clients:\n        default:\n          naming:\n            # {app.namespace} expands to: justtrack-production-platform-core\n            queue_pattern: "{app.namespace}-{queueId}"\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Define your naming hierarchy once and reuse it everywhere"}),"\n",(0,d.jsxs)(n.li,{children:["Simplify resource patterns by using ",(0,d.jsx)(n.code,{children:"{app.namespace}"})," instead of repeating the same placeholders"]}),"\n",(0,d.jsx)(n.li,{children:"Easy to change your naming convention across all resources in one place"}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["When expanded, dots in the namespace pattern are replaced with the service-specific delimiter (usually ",(0,d.jsx)(n.code,{children:"-"}),"). If no namespace is configured, ",(0,d.jsx)(n.code,{children:"{app.namespace}"})," expands to an empty string."]}),"\n",(0,d.jsx)(n.h3,{id:"delimiter-configuration",children:"Delimiter Configuration"}),"\n",(0,d.jsxs)(n.p,{children:["Each resource naming pattern has a paired ",(0,d.jsx)(n.strong,{children:"delimiter"})," configuration that controls how ",(0,d.jsx)(n.code,{children:"{app.namespace}"})," is expanded:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Most services use ",(0,d.jsx)(n.code,{children:"identity.Format()"})," with a configurable delimiter (default is usually ",(0,d.jsx)(n.code,{children:"-"}),")"]}),"\n",(0,d.jsxs)(n.li,{children:["The delimiter replaces dots in the ",(0,d.jsx)(n.code,{children:"{app.namespace}"})," pattern during expansion"]}),"\n",(0,d.jsxs)(n.li,{children:["Example: namespace ",(0,d.jsx)(n.code,{children:"{app.tags.project}.{app.env}"})," with delimiter ",(0,d.jsx)(n.code,{children:"-"})," becomes ",(0,d.jsx)(n.code,{children:"myproject-prod"})]}),"\n",(0,d.jsxs)(n.li,{children:["Each service's delimiter can be customized via its ",(0,d.jsx)(n.code,{children:"naming.delimiter"})," configuration key"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"placeholder-mapping",children:"Placeholder Mapping"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{style:{textAlign:"left"},children:"Old Placeholder"}),(0,d.jsx)(n.th,{style:{textAlign:"left"},children:"New Placeholder"}),(0,d.jsx)(n.th,{style:{textAlign:"left"},children:"Notes"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{project}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{app.tags.project}"})}),(0,d.jsxs)(n.td,{style:{textAlign:"left"},children:["Requires ",(0,d.jsx)(n.code,{children:"project"})," tag"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{family}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{app.tags.family}"})}),(0,d.jsxs)(n.td,{style:{textAlign:"left"},children:["Requires ",(0,d.jsx)(n.code,{children:"family"})," tag"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{group}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{app.tags.group}"})}),(0,d.jsxs)(n.td,{style:{textAlign:"left"},children:["Requires ",(0,d.jsx)(n.code,{children:"group"})," tag"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{env}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{app.env}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:"Built-in field"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{app}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{app.name}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:"Built-in field"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.code,{children:"{modelId}"})}),(0,d.jsx)(n.td,{style:{textAlign:"left"},children:(0,d.jsx)(n.strong,{children:"REMOVED"})}),(0,d.jsxs)(n.td,{style:{textAlign:"left"},children:["See ",(0,d.jsx)(n.a,{href:"#dynamodb-table-naming",children:"DynamoDB"})," section"]})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"example-sqs-pattern-update",children:"Example: SQS Pattern Update"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Old:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'cloud:\n  aws:\n    sqs:\n      clients:\n        default:\n          naming:\n            pattern: "{project}-{env}-{queueId}"\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"New:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'cloud:\n  aws:\n    sqs:\n      clients:\n        default:\n          naming:\n            queue_pattern: "{app.tags.project}-{app.env}-{queueId}"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"dynamodb-table-naming",children:"DynamoDB Table Naming"}),"\n",(0,d.jsx)(n.p,{children:"For DynamoDB tables, the naming logic has been aligned with other AWS resources."}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Placeholder Change:"})," Use ",(0,d.jsx)(n.code,{children:"{name}"})," instead of ",(0,d.jsx)(n.code,{children:"{modelId}"})," to refer to the model name."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"No Auto-Append:"})," Unlike the canonical Model ID, the table name pattern ",(0,d.jsx)(n.strong,{children:"does not"})," automatically append the model name. You must explicitly include ",(0,d.jsx)(n.code,{children:"{name}"})," in your pattern."]}),"\n"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Pattern"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Old"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{modelId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"New"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.tags.project}-{app.env}-{name}"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["Replace ",(0,d.jsx)(n.code,{children:"{modelId}"})," with ",(0,d.jsx)(n.code,{children:"{name}"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["Ensure ",(0,d.jsx)(n.code,{children:"{name}"})," is present in your pattern."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"3-update-go-code",children:"3. Update Go Code"}),"\n",(0,d.jsxs)(n.h3,{id:"cfgappid-is-now-cfgappidentity",children:[(0,d.jsx)(n.code,{children:"cfg.AppId"})," is now ",(0,d.jsx)(n.code,{children:"cfg.AppIdentity"})]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"AppId"})," struct and its getters have been removed."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'// OLD\nappId, _ := cfg.GetAppIdFromConfig(config)\nfmt.Println(appId.Project)\n\n// NEW\nidentity, _ := cfg.GetAppIdentityFromConfig(config)\nfmt.Println(identity.Tags["project"])\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"mdlmodelid-refactoring",children:[(0,d.jsx)(n.code,{children:"mdl.ModelId"})," Refactoring"]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"mdl.ModelId"})," struct no longer has explicit hierarchy fields."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'// OLD\nmodelId := mdl.ModelId{\n    Project: "my-project",\n    Family:  "my-family",\n    Name:    "my-model",\n}\n\n// NEW\nmodelId := mdl.ModelId{\n    Name: "my-model",\n    Tags: map[string]string{\n        "project": "my-project",\n        "family":  "my-family",\n    },\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"modelid-domain-pattern",children:"ModelId Domain Pattern"}),"\n",(0,d.jsxs)(n.p,{children:["The string representation of a ",(0,d.jsx)(n.code,{children:"ModelId"})," (used for message routing attributes, etc.) is now configurable via ",(0,d.jsx)(n.code,{children:"app.model_id.domain_pattern"}),"."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Config Key:"})," ",(0,d.jsx)(n.code,{children:"app.model_id.domain_pattern"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Recommended Value:"})," ",(0,d.jsx)(n.code,{children:"{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"})]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["If this pattern is missing, calling ",(0,d.jsx)(n.code,{children:"modelId.String()"})," will return an error."]}),"\n",(0,d.jsxs)(n.admonition,{type:"caution",children:[(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["The ",(0,d.jsx)(n.code,{children:"{modelId}"})," placeholder is ",(0,d.jsx)(n.strong,{children:"NOT"})," used in this pattern. The model name is automatically appended as the last segment."]}),"\n",(0,d.jsxs)(n.li,{children:["The pattern must consist ",(0,d.jsx)(n.em,{children:"only"})," of placeholders separated by ",(0,d.jsxs)(n.strong,{children:["single dots (",(0,d.jsx)(n.code,{children:"."}),")"]}),". No other characters or delimiters (like dashes) are allowed between placeholders."]}),"\n"]}),(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Valid:"})," ",(0,d.jsx)(n.code,{children:"{app.tags.project}.{app.env}"})]}),(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Invalid:"})," ",(0,d.jsx)(n.code,{children:"{app.tags.project}-{app.env}"})," (dashes not allowed)"]}),(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Invalid:"})," ",(0,d.jsx)(n.code,{children:"prefix.{app.tags.project}"})," (static text not allowed)"]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Pattern: ",(0,d.jsx)(n.code,{children:"{app.tags.project}.{app.env}"})]}),"\n",(0,d.jsxs)(n.li,{children:["Model Name: ",(0,d.jsx)(n.code,{children:"myModel"})]}),"\n",(0,d.jsxs)(n.li,{children:["Result: ",(0,d.jsx)(n.code,{children:"myProject.production.myModel"})]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"pkgparquet-removed",children:[(0,d.jsx)(n.code,{children:"pkg/parquet"})," Removed"]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"pkg/parquet"})," package has been deleted. Remove any imports or usage of this package from your codebase."]}),"\n",(0,d.jsx)(n.h2,{id:"4-redis-key-prefixing",children:"4. Redis Key Prefixing"}),"\n",(0,d.jsx)(n.p,{children:"A new feature allows automatic key prefixing for Redis. If you were manually prefixing keys in your application code, you can now move this to configuration:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'redis:\n  clients:\n    default:\n      naming:\n        key_pattern: "{app.tags.project}:{app.name}:{key}"\n'})}),"\n",(0,d.jsx)(n.h2,{id:"5-stream-inputoutput-configuration",children:"5. Stream Input/Output Configuration"}),"\n",(0,d.jsxs)(n.p,{children:["The configuration for stream inputs and outputs has been updated to use the new ",(0,d.jsx)(n.code,{children:"AppIdentity"})," structure."]}),"\n",(0,d.jsx)(n.h3,{id:"general-change",children:"General Change"}),"\n",(0,d.jsxs)(n.p,{children:["For most inputs (Redis) and outputs (Kafka, Kinesis, Redis, SNS, SQS), the flat fields ",(0,d.jsx)(n.code,{children:"project"}),", ",(0,d.jsx)(n.code,{children:"family"}),", ",(0,d.jsx)(n.code,{children:"group"}),", and ",(0,d.jsx)(n.code,{children:"application"})," have been replaced by an ",(0,d.jsx)(n.code,{children:"identity"})," block."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Old output config:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  output:\n    my-output:\n      type: sqs\n      project: my-project\n      family: my-family\n      group: my-group\n      queue_id: my-queue\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"New output config:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  output:\n    my-output:\n      type: sqs\n      identity:\n        tags:\n          project: my-project\n          family: my-family\n          group: my-group\n      queue_id: my-queue\n"})}),"\n",(0,d.jsx)(n.h3,{id:"sqs-input",children:"SQS Input"}),"\n",(0,d.jsxs)(n.p,{children:["For SQS inputs, the ",(0,d.jsx)(n.code,{children:"target_*"})," fields for identity have been grouped into ",(0,d.jsx)(n.code,{children:"target_identity"}),"."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Old:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  input:\n    my-input:\n      type: sqs\n      target_family: my-family\n      target_group: my-group\n      target_queue_id: my-queue\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"New:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  input:\n    my-input:\n      type: sqs\n      target_identity:\n        tags:\n          family: my-family\n          group: my-group\n      target_queue_id: my-queue\n"})}),"\n",(0,d.jsx)(n.h3,{id:"sns-input",children:"SNS Input"}),"\n",(0,d.jsx)(n.p,{children:"For SNS inputs, the consumer identity and target topic identities have been updated."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Old:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  input:\n    my-sns-input:\n      type: sns\n      id: my-consumer\n      family: my-family\n      group: my-group\n      targets:\n        - family: target-family\n          group: target-group\n          topic_id: target-topic\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"New:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  input:\n    my-sns-input:\n      type: sns\n      id: my-consumer\n      identity:\n        tags:\n          family: my-family\n          group: my-group\n      targets:\n        - identity:\n            tags:\n              family: target-family\n              group: target-group\n          topic_id: target-topic\n"})}),"\n",(0,d.jsx)(n.h3,{id:"kafka-and-kinesis-inputs",children:"Kafka and Kinesis Inputs"}),"\n",(0,d.jsxs)(n.p,{children:["Kafka and Kinesis inputs now also use the ",(0,d.jsx)(n.code,{children:"identity:"})," block pattern:"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Old (Kafka input):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  input:\n    my-kafka-input:\n      type: kafka\n      env: production\n      name: my-app\n      tags:\n        project: my-project\n        family: my-family\n        group: my-group\n      topic_id: my-topic\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"New (Kafka input):"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"stream:\n  input:\n    my-kafka-input:\n      type: kafka\n      identity:\n        env: production\n        name: my-app\n        tags:\n          project: my-project\n          family: my-family\n          group: my-group\n      topic_id: my-topic\n"})}),"\n",(0,d.jsx)(n.p,{children:"The same pattern applies to Kinesis inputs and outputs."}),"\n",(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsxs)(n.p,{children:["Redis list inputs and outputs do ",(0,d.jsx)(n.strong,{children:"not"})," use the ",(0,d.jsx)(n.code,{children:"identity:"})," block. They only require ",(0,d.jsx)(n.code,{children:"server_name"}),", ",(0,d.jsx)(n.code,{children:"key"}),", and transport-specific settings. The Redis client's naming configuration handles key and address naming independently."]})}),"\n",(0,d.jsx)(n.h3,{id:"mdlsub-publisher-configuration",children:"mdlsub Publisher Configuration"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"PublisherSettings"})," struct has changed: ",(0,d.jsx)(n.code,{children:"mdl.ModelId"})," is no longer an embedded (anonymous) field -- it is now a named field with the config tag ",(0,d.jsx)(n.code,{children:"model_id"}),". All ModelId-related configuration keys must be nested under a ",(0,d.jsx)(n.code,{children:"model_id"})," key."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Old:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"mdlsub:\n  publishers:\n    my-model:\n      name: my-model\n      project: my-project\n      family: my-family\n      group: my-group\n      output_type: sns\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"New:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"mdlsub:\n  publishers:\n    my-model:\n      model_id:\n        name: my-model          # optional: defaults to the publisher map key\n        tags:\n          project: my-project\n          family: my-family\n          group: my-group\n      output_type: sns\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"In Go code:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'// OLD\nsettings := &mdlsub.PublisherSettings{\n    ModelId: mdl.ModelId{\n        Project: "my-project",\n        Name:    "my-model",\n    },\n    OutputType: "sns",\n}\n\n// NEW\nsettings := &mdlsub.PublisherSettings{\n    ModelId: mdl.ModelId{\n        Name: "my-model",\n        Tags: map[string]string{\n            "project": "my-project",\n        },\n    },\n    OutputType: "sns",\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"6-reference-naming-patterns-per-service",children:"6. Reference: Naming Patterns per Service"}),"\n",(0,d.jsx)(n.p,{children:"This section lists the configuration keys, their old and new defaults, and the corresponding environment variables."}),"\n",(0,d.jsx)(n.h3,{id:"sqs-queue-naming",children:"SQS Queue Naming"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.sqs.clients.default.naming.queue_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{queueId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{queueId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Env Var"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GOSO_CLOUD_AWS_SQS_CLIENTS_DEFAULT_NAMING_QUEUE_PATTERN"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.sqs.clients.default.naming.queue_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"sns-topic-naming",children:"SNS Topic Naming"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.sns.clients.default.naming.topic_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{topicId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{topicId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Env Var"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GOSO_CLOUD_AWS_SNS_CLIENTS_DEFAULT_NAMING_TOPIC_PATTERN"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.sns.clients.default.naming.topic_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"kinesis-stream-naming",children:"Kinesis Stream Naming"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.kinesis.clients.default.naming.stream_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{streamName}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{streamName}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Env Var"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GOSO_CLOUD_AWS_KINESIS_CLIENTS_DEFAULT_NAMING_STREAM_PATTERN"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.kinesis.clients.default.naming.stream_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"kinesis-metadata-table",children:"Kinesis Metadata Table"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.kinesis.clients.default.naming.metadata_table_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.env}-kinsumer-metadata"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-kinsumer-metadata"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.kinesis.clients.default.naming.metadata_table_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"kinesis-metadata-namespace",children:"Kinesis Metadata Namespace"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.kinesis.clients.default.naming.metadata_namespace_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{app}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{app.name}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.kinesis.clients.default.naming.metadata_namespace_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"kafka-naming",children:"Kafka Naming"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Topic Pattern:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kafka.naming.topic_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{topicId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{topicId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Env Var"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GOSO_KAFKA_NAMING_TOPIC_PATTERN"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kafka.naming.topic_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Consumer Group Pattern:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kafka.naming.group_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{app}-{groupId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{app.name}-{groupId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Env Var"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GOSO_KAFKA_NAMING_GROUP_PATTERN"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kafka.naming.group_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"dynamodb-table-naming-1",children:"DynamoDB Table Naming"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.dynamodb.clients.default.naming.table_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{modelId}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{name}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Env Var"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"GOSO_CLOUD_AWS_DYNAMODB_CLIENTS_DEFAULT_NAMING_TABLE_PATTERN"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.dynamodb.clients.default.naming.table_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"dynamodb-leader-election-table",children:"DynamoDB Leader Election Table"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"conc.ddb.leader_election.<name>.naming.table_pattern"})," (renamed from ",(0,d.jsx)(n.code,{children:"naming.pattern"}),")"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-leader-elections"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.tags.project}-{app.env}-{app.tags.family}-leader-elections"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"conc.ddb.leader_election.<name>.naming.table_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["Rename ",(0,d.jsx)(n.code,{children:"naming.pattern"})," to ",(0,d.jsx)(n.code,{children:"naming.table_pattern"})," in your config."]}),"\n",(0,d.jsx)(n.li,{children:"Replace old-style placeholders with new-style ones."}),"\n",(0,d.jsxs)(n.li,{children:["If you need a custom delimiter, set ",(0,d.jsx)(n.code,{children:"naming.table_delimiter"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"metric-calculator-dynamodb-table",children:"Metric Calculator DynamoDB Table"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"metric.calculator.dynamodb.naming.table_pattern"})," (renamed from ",(0,d.jsx)(n.code,{children:"naming.pattern"}),")"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.env}-metric-calculator-leaders"})})]})]})]}),"\n",(0,d.jsxs)(n.admonition,{type:"warning",children:[(0,d.jsxs)(n.p,{children:["The default pattern has changed significantly. It no longer uses ",(0,d.jsx)(n.code,{children:"{project}"})," or ",(0,d.jsx)(n.code,{children:"{family}"})," and now includes a descriptive suffix. If you relied on the old default, explicitly set the pattern:"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'metric:\n  calculator:\n    dynamodb:\n      naming:\n        table_pattern: "{app.tags.project}-{app.env}-{app.tags.family}-metric-calculator-leaders"\n'})})]}),"\n",(0,d.jsx)(n.h3,{id:"cloudwatch-namespace",children:"CloudWatch Namespace"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"metric.writer_settings.cloudwatch.naming.namespace_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}/{env}/{family}/{group}-{app}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{app.name}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"metric.writer_settings.cloudwatch.naming.namespace_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/"})})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["CloudWatch uses ",(0,d.jsx)(n.code,{children:"/"})," as the delimiter, creating hierarchical namespaces in AWS Console."]}),"\n",(0,d.jsx)(n.h3,{id:"prometheus-namespace",children:"Prometheus Namespace"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"metric.writer_settings.prometheus.naming.namespace_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{app}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{app.name}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"metric.writer_settings.prometheus.naming.namespace_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"_"})," (underscores, following Prometheus naming conventions)"]})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"redis-key-prefix",children:"Redis Key Prefix"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"redis.clients.default.naming.key_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:"N/A (feature did not exist)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"{key}"})," (no prefix)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"redis.clients.default.naming.key_delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"kvstore-redis-key-pattern",children:"KvStore Redis Key Pattern"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"kvstore.<name>.redis.key_pattern"})," or ",(0,d.jsx)(n.code,{children:"kvstore.default.redis.key_pattern"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.tags.project}-{app.tags.family}-{app.tags.group}-kvstore-{store}-{key}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-kvstore-{store}-{key}"})})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"{store}"})," placeholder is resolved by the kvstore config postprocessor before the pattern is passed to the underlying Redis client."]}),"\n",(0,d.jsx)(n.h3,{id:"tracing-service-name",children:"Tracing Service Name"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"tracing.naming.pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{project}-{env}-{family}-{group}-{app}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}-{app.name}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"tracing.naming.delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"blob--s3-bucket-patterns",children:"Blob / S3 Bucket Patterns"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"blob"})," package now delegates bucket naming to the ",(0,d.jsx)(n.code,{children:"cloud.aws.s3"})," package. The configuration keys ",(0,d.jsx)(n.code,{children:"blob.<store_name>.bucket_pattern"})," and ",(0,d.jsx)(n.code,{children:"blob.default.bucket_pattern"})," have been ",(0,d.jsx)(n.strong,{children:"removed"}),"."]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Value"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Config Key"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.s3.clients.<client_name>.naming.bucket_pattern"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Old Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.tags.project}-{app.env}-{app.tags.family}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{app.namespace}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"New Placeholder"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"{bucketId}"})," (resolves to the blob store name)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Config"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cloud.aws.s3.clients.<client_name>.naming.delimiter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Delimiter Default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Migration:"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"Move any custom bucket patterns to the new S3 naming config key."}),"\n",(0,d.jsxs)(n.li,{children:["Configure ",(0,d.jsx)(n.code,{children:"app.namespace"})," to match your previous naming structure:"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'app:\n  namespace: "{app.tags.project}.{app.env}.{app.tags.family}"\n\ncloud:\n  aws:\n    s3:\n      clients:\n        default:\n          naming:\n            # Option 1: Use namespace (results in same pattern as before)\n            bucket_pattern: "{app.namespace}-data"\n\n            # Option 2: Define pattern explicitly\n            bucket_pattern: "{app.tags.project}-{app.env}-data"\n'})}),"\n",(0,d.jsx)(n.h2,{id:"quick-start-minimal-backward-compatible-configuration",children:"Quick Start: Minimal Backward-Compatible Configuration"}),"\n",(0,d.jsx)(n.p,{children:"If you want the fastest migration path with minimal risk, add this to your configuration to preserve existing resource names:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'app:\n  env: production              # was: env\n  name: my-service             # was: app_name\n  namespace: "{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"\n  tags:\n    project: justtrack         # was: app_project\n    family: platform           # was: app_family\n    group: core                # was: app_group\n\n  model_id:\n    domain_pattern: "{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"\n'})}),"\n",(0,d.jsx)(n.p,{children:"This configuration ensures all resource names resolve identically to the old defaults while using the new configuration structure."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}}}]);